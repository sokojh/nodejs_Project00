<!doctype html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <!-- í”„ë¡œì íŠ¸ css -->
    
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="/public/css/search.css">
    <!-- êµ¬ê¸€í°ì¸  ì•„ì´ì½˜ -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <title>ì£¼ê°„ì†œë­‰ì¹˜</title> 
  </head>
  <!-- Jqeury -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

  <!-- dateFormating ì‹œê°„.-->
  <script>
    const getDate = (writeDate) => {
      let writeDateFormat = new Date(writeDate)
      let writeDday = new Date().getDate() - writeDateFormat.getDate();
      let result=(writeDday != 1) ? writeDday + 'ì¼ ì „' : 'ì˜¤ëŠ˜'
      return result
    }
  </script>
  <!-- ëª¨ë‹¬ì°½ ë°ì´í„° ì „ë‹¬-->
 <script>
   
  modalArticleId = null
  const clickModal = (e) => {
    var text = "";
    let thisArticleAutherId = e.id.split('/')[0] // ê²Œì‹œë¬¼ì˜ ì‘ì„±ì id ê°’ ì €ì¥
    modalArticleId = e.id.split('/')[1] // í˜„ì¬ í´ë¦­í•œ ê²Œì‹œë¬¼ì˜ id ê°’ ì €ì¥
    console.log(modalArticleId)
    $.ajax({
      url: '/search/modalUpdate',
      type: 'post',
      data: {
        '_id': modalArticleId,
        'article_id':modalArticleId
      }
    }).done((data) => {
      console.log(Object.values(data))
      document.getElementById("modalText").innerHTML="<p>"+data.contentText+'</p>'
      document.getElementById("modalImageUrl").innerHTML="<center><img class='ss' src="+data.contentImgKey[0]+"></center>"
      document.getElementById("modalDate").innerHTML=getDate(data.createDate)
      document.getElementById("modalComment").innerHTML=data.text
      
    }).fail((err) => { 
      console.log(err); 
    })
  }


  
  </script>
 
  <body> 
   
    <!-- top nav -->
    <%- include('htmlPiece/nav.html') %>   
    <!-- ê²€ìƒ‰ê²°ê³¼ í…ìŠ¤íŠ¸-->
    <div>
    <center><h3><b><%= valueSuc %></b>ì˜ ê²€ìƒ‰ê²°ê³¼ ì…ë‹ˆë‹¤. ğŸ˜ </h3></center><br>
    <center><p><b>ê²Œì‹œë¬¼</b> <%= searchReq %></p></center>
  </div>

<!-- ëª¨ë‹¬ì°½ -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        ğŸ‘
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <!-- ëª¨ë‹¬ ê°€ìš´ë° ë¶€ë¶„-->
      <div class="modal-body">
        
        <div class=""> 
          <p id="modalImageUrl"></p>
          <p id="modalText"></p>
          <p id="modalDate"></p>
          <p id="modalComment"></p>
        </div>
        </div>


        <!--ëª¨ë‹¬ ë°‘ë¶€ë¶„ì˜ì—­-->
      <div class="modal-footer">
        <div class="input-group mb-3">
          <input type="text" class="form-control" placeholder="ëŒ“ê¸€ì„ì…ë ¥í•˜ì„¸ìš”..." aria-label="" aria-describedby="basic-addon2">
          <div class="input-group-append">
            <button class="btn btn-outline-primary" type="button">ê²Œì‹œ</button>
          </div>
        </div>
      </div> 
      </div>
    </div>
    </div>
  </div>

    <!-- ê²Œì‹œë¬¼ ì¶œë ¥ -->
    <div class="container-sm">
    <div class="row">
    <% articles.forEach(element => { %>
        
        <!-- ë©”ì¸ ì´ë¯¸ì§€ ì˜ì—­ -->
        <figure class="snip1200">
          <img src="<%= element.contentImgKey[0] %>" class="" alt="...">
          <figcaption>
            <center><p>ğŸ’¬<%= element.commentCount %> ğŸ¤<%=element.likeCount%> </p></center>
            
            
          </figcaption>
          <a onclick=clickModal(this) id='<%= element.auther._id %>/<%= element._id %>' href="#" data-toggle="modal" data-target="#exampleModalCenter"></a>
            <!-- ë°œí–‰ ë‚ ì§œ -->
          <!--<p class="postDate mt-2"><script>getDate('<%# element.createDate %>')</script></p>
          <span class="badge badge-success badge-pill">ì¢‹ì•„ìš”<%# element.likeCount %></span>-->
        </figure>
        
      
  
          
        
          
      
    <% }) %>
</div>
</div>

    <br><br><br><br><br><br><br>

    <!-- í•˜ë‹¨ nav ë°” -->
    <%- include('htmlPiece/bottomNav.html') %>

    <!-- ë¶€íŠ¸ìŠ¤íŠ¸ë© -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
  
  </body>
</html>